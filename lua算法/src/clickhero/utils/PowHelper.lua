local PowHelper ={
}

local pow1_07={ -- 以10200 为步长
    [1] = {num=5.1824174038604,exp=299},
    [2] = {num=2.6857450147835,exp=599},
    [3] = {num=1.3918651706945,exp=899},
    [4] = {num=7.2132262844345,exp=1198},
    [5] = {num=3.7381949434437,exp=1498},
    [6] = {num=1.9372886533925,exp=1798},
    [7] = {num=1.0039838433643,exp=2098},
    [8] = {num=5.2030633430457,exp=2397},
    [9] = {num=2.6964446022388,exp=2697},
    [10] = {num=1.3974101435188,exp=2997},
    [11] = {num=7.2419626481028,exp=3296},
    [12] = {num=3.7530873265635,exp=3596},
    [13] = {num=1.9450065079391,exp=3896},
    [14] = {num=1.0079835577365,exp=4196},
    [15] = {num=5.2237915324188,exp=4495},
    [16] = {num=2.7071868151746,exp=4795},
}

local pow1_15={ -- 以 500 为步长
    [1] = {num=3.084620695545,exp=303},
    [2] = {num=9.5148848353845,exp=606},
    [3] = {num=2.9349810678954,exp=910},
    [4] = {num=9.053303343063,exp=1213},
    [5] = {num=2.7926006855059,exp=1517},
    [6] = {num=8.6141138689045,exp=1820},
    [7] = {num=2.6571273913804,exp=2124},
    [8] = {num=8.1962301421515,exp=2427},
    [9] = {num=2.528226112193,exp=2731},
    [10] = {num=7.7986185886879,exp=3034},
    [11] = {num=2.4055780295328,exp=3338},
    [12] = {num=7.4202957746454,exp=3641},
    [13] = {num=2.2888797913536,exp=3945},
    [14] = {num=7.0603259740241,exp=4248},
    [15] = {num=2.1778427616769,exp=4552},
    [16] = {num=6.7178188543113,exp=4855},
}

local pow2={ -- 1000 为步长
    [1] = {num=1.0715086071863,exp=301},
    [2] = {num=1.1481306952743,exp=602},
    [3] = {num=1.2302319221611,exp=903},
    [4] = {num=1.3182040934309,exp=1204},
    [5] = {num=1.4124670321394,exp=1505},
    [6] = {num=1.5134705823042,exp=1806},
    [7] = {num=1.6216967556622,exp=2107},
    [8] = {num=1.7376620319381,exp=2408},
    [9] = {num=1.8619198236024,exp=2709},
    [10] = {num=1.9950631168808,exp=3010},
    [11] = {num=2.1377273016176,exp=3311},
    [12] = {num=2.2905932035003,exp=3612},
    [13] = {num=2.454390333113,exp=3913},
    [14] = {num=2.6299003673253,exp=4214},
    [15] = {num=2.8179608796314,exp=4515},
    [16] = {num=3.0194693372392,exp=4816},
}
local pow3={ -- 以 630 为步长
    [1] = {num=3.8582509641637,exp=300},
    [2] = {num=1.488610050247,exp=601},
    [3] = {num=5.7434311616291,exp=901},
    [4] = {num=2.2159598816963,exp=1202},
    [5] = {num=8.5497293501029,exp=1502},
    [6] = {num=3.2987001508373,exp=1803},
    [7] = {num=1.2727213037455,exp=2104},
    [8] = {num=4.9104781972876,exp=2404},
    [9] = {num=1.894585723919,exp=2705},
    [10] = {num=7.309787196001,exp=3005},
    [11] = {num=2.8202993496802,exp=3306},
    [12] = {num=1.0881422685134,exp=3607},
    [13] = {num=4.198325956639,exp=3907},
    [14] = {num=1.6198195170076,exp=4208},
    [15] = {num=6.2496702132656,exp=4508},
    [16] = {num=2.4112796126037,exp=4809},
}

local pow4={ -- 以 500 为步长
    [1] = {num=1.0715086071863,exp=301},
    [2] = {num=1.1481306952743,exp=602},
    [3] = {num=1.2302319221611,exp=903},
    [4] = {num=1.3182040934309,exp=1204},
    [5] = {num=1.4124670321394,exp=1505},
    [6] = {num=1.5134705823042,exp=1806},
    [7] = {num=1.6216967556622,exp=2107},
    [8] = {num=1.7376620319381,exp=2408},
    [9] = {num=1.8619198236024,exp=2709},
    [10] = {num=1.9950631168808,exp=3010},
    [11] = {num=2.1377273016176,exp=3311},
    [12] = {num=2.2905932035003,exp=3612},
    [13] = {num=2.454390333113,exp=3913},
    [14] = {num=2.6299003673253,exp=4214},
    [15] = {num=2.8179608796314,exp=4515},
    [16] = {num=3.0194693372392,exp=4816},
}

local pow10={ -- 以300 为步长
    [1] = {num=1,exp=300},
    [2] = {num=1,exp=600},
    [3] = {num=1,exp=900},
    [4] = {num=1,exp=1200},
    [5] = {num=1,exp=1500},
    [6] = {num=1,exp=1800},
    [7] = {num=1,exp=2100},
    [8] = {num=1,exp=2400},
    [9] = {num=1,exp=2700},
    [10] = {num=1,exp=3000},
    [11] = {num=1,exp=3300},
    [12] = {num=1,exp=3600},
    [13] = {num=1,exp=3900},
    [14] = {num=1,exp=4200},
    [15] = {num=1,exp=4500},
    [16] = {num=1,exp=4800},
}

local powMap = {
        ["1.07"]={step=10200,value=pow1_07},
        ["1.15"]={step=5000,value=pow1_15},
        ["2"]={step=1000,value=pow2},
        ["3"]={step=630,value=pow3},
        ["4"]={step=500,value=pow4},
        ["10"]={step=300,value=pow10},
}

function PowHelper:pow(a,b)
    local k = tostring(a)
    if powMap[k] then
        local n = math.floor(b/powMap[k].step)
        if (n > 0) then
            local p = b - n*powMap[k].step
            return math.pow(a,p)*powMap[k]["value"][n]["num"],powMap[k]["value"][n]["exp"]
        else
            return math.pow(a,b),0
        end
    else
        return nil,nil
    end
end

--- math.pow(10,n) 当n为负数时，唯有0.000001的误差
function PowHelper:pow10(n)
	local p = 1
	if n > 0 then
	   p = math.pow(10,n)
	else
        p = 1/math.pow(10,-n)
	end
	return p
end


return PowHelper